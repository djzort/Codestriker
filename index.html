<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<html>
    <head>
	<title>Codestriker</title>
    </head>
    <body bgcolor="white">
	<h1>Codestriker</h1>
	<p>
	    Codestriker: Copyright (c) 2001, 2002 David Sitsky.  All rights
	    reserved.<br>
	   <A HREF="mailto:sitsNOSPAM@users.sourceforgeNOSPAM.net">
		sitsNOSPAM@users.sourceforgeNOSPAM.net</A>
	</p>
        <p>
	   <a href="screenshot.jpg">
	      <img src="screenshot_thumb.jpg" width="200" height="160"
	           alt="CVS integration"></a>
	</p>
	<p>
	    The latest version of codestriker can be obtained from:
   <A HREF="http://prdownloads.sourceforge.net/codestriker/codestriker-1.4.2.tar.gz">
	http://prdownloads.sourceforge.net/codestriker/codestriker-1.4.2.tar.gz</A>
	</p>
	<p>
	    Codestriker sourceforge project information can be found from
        <A HREF="http://sourceforge.net/projects/codestriker">
           http://sourceforge.net/projects/codestriker</A>.
	</p>
	<p>
	    Codestriker is a perl CGI script which is used for
	    performing code reviews in a collaborative fashion as
	    opposed to using unstructured emails.
	</p>
	<p>
	    Authors create code review topics, where the nominated
	    reviewers will be automatically notified by email.
	    Reviewers then submit comments against the code on a
	    per-line basis, and can also view comments submitted by
	    the other reviewers as they are created.  Emails are sent
	    to the appropriate parties when comments are created, as
	    an alert mechanism.  The author is also free to submit
	    comments against the review comments.
	</p>
	<p>
	    Once all reviewers have finished, the author has all
	    review comments available in a structured fashion, as
	    opposed to a pile of unstructured emails.
	</p>
	<p>
	    Special support is provided for integration with a CVS
	    repository, for the display of coloured diffs and for the
	    ability to view original and new files in their entirety
	    to assist in the review process.  Codestriker can be
	    optionally linked with a bug tracking system, such as
	    bugzilla, and a CVS web viewing system, such as CVS web to
	    obtain further information necessary to complete a review.
        </p>

	<h2>Example usage</h2>
	<p>
	    This example will show how a new topic is created, how it
	    is viewed, and how new comments can be submitted.
	</p>
	<h3>Creating a new topic</h3>
	<p>
	    A new code review topic is created by filling in the form
	    in the create topic screen (click to enlarge image).
	</p>
	<p>
	    <a href="create.jpg">
	       <img src="create_thumb.jpg" width="150" height="175"
	       alt="Create review">
	    </a>
	</p>
	<p>
	    The "Topic title" field provides a summary of
	    the new topic.  The "Topic description"
	    provides a description as to what the code changes are,
	    which needs to be informative, as this is the text that
	    is sent with the topic creation email.
	</p>
	<p>
	    The actual code itself is entered either pasted inline
	    into the "Topic text" form element, or uploaded
	    from a file.  In practical use, often the text contains
	    the output of the command "cvs diff -uN" or
	    simply "diff -ruN", which will effectively shows
	    the proposed code differences.
	</p>
        <p>
	    The "Bug number" field is optional, and is used to link
	    the review to a bug in your bug tracking system, such as
	    Bugzilla.  If the bug number is entered, a link will be
	    present in the view topic screen.
        </p>
	<p>
	    The following three email address fields are stored into a
	    cookie, as they will often be used again for subsequent
	    topic creations.  The "email address" is also
	    used when submitting comments.  Once the submit button is
	    pressed, an email is sent to all of the email addresses
	    indicating that a new topic has been created, with the URL
	    indicating how to access the topic.
	</p>
	<h3>Viewing the topic</h3>
	<p>
	    When viewing a topic, the title appears at the top,
	    followed by the creation date of the topic, and a link to
	    the bug page that this topic fixes (ie, a view bug page in
	    bugzilla).  This is followed by the email addresses of the
	    people involved, and what their respective roles are.  The
	    size of the topic text is then shown, to indicate a rough
	    size of the review.  The topic description follows.  The
	    number of comments made against this topic is then shown.
	    If required, the actual topic text can be downloaded (ie,
	    if it is a patch which later needs to be applied).  The
	    code text is then shown in its entirety, followed by the
	    submitted comments.  Clicking on "comments" will take the
	    browser to the start of the comments at the end of the
	    page.
	</p>
	<p>
	    A comment can be made against any line by simply clicking
	    on the line number.  Lines which are coloured red indicate
	    that comments have already been submitted against it.  By
	    moving the mouse over these red lines, a digest of the
	    comment will appear in the browser's status line.  For
	    those browsers which support it, a tooltip will also popup
	    containing the comment digest.
	</p>
	<p>
	    <a href="view.jpg">
	        <img src="view_thumb.jpg" width="150" height="188"
		     alt="View review 1"></a>
	</p>
	<p>
	    In this example, the user scrolls to the bottom of the
	    page, and clicks on line number 247 (click to enlarge
	    image).
	</p>
	<h3>Submitting a comment</h3>
	<p>
	    The user is then fills out the form as shown in the
	    following diagram.
	</p>
	<p>
	    <a href="edit.jpg">
	        <img src="edit_thumb.jpg" width="150" height="207"
		     alt="Edit review"></a>
	</p>
	<p>
	    A few lines are shown indicating the code of interest.
	    The line marked in red is the line the comment is being
	    made against.  Clicking on "increase" or
	    "decrease" will increase or decrease the the
	    number of surrounding lines respectively.  If cookies are
	    enabled in your browser, the email address in the form
	    will be remembered, so that you don't need to enter it in
	    for all subsequent comments.
	</p>
	<p>
	    The "comments" field is used for entered in
	    your comments.  The submit button will lodge your comment,
	    and take you back to the viewing page, centered on the
	    line you just made your comment against, as shown in the
	    following diagram.  Note how line 247 is now rendered red,
	    and all comments are presented in reverse chronological
	    order.
	</p>
	<p>
	    <a href="view2.jpg">
	       <img src="view2_thumb.jpg" width="150" height="179"
	            alt="View review 2"></a>
	</p>

	<h3>Coloured diff support</h3>
	<p>
	   Codestriker provides special support when the topic
	   contents are in the form from the command "cvs diff
	   -uN" or "diff -ruN".  Although not shown above, the topic view
	   screen has a link at the top, to alternate between coloured
	   diff and the textual view.  An example of a coloured diff
	   can be seen below, which some developers find easier to
	   read than an ordinary diff.
	</p>
	<p>
	   <a href="view3.jpg">
	      <img src="view3_thumb.jpg" width="150" height="121"
	           alt="View coloured diff"></a>
	</p>
	<p>
	   At the start of a page is a "table of contents", which
	   indicates which files are a part of the review, and their
	   associated revision numbers if applicable.  Clicking on the
	   filenames will direct the browser directly to that section
	   of the review.  Each file has a header of the form "Diff
	   for &lt;filename&gt; ...".  The filename is linked to the
	   associated CVS viewing page (such as CVS web) for that
	   file.
        </p>
	<p>
	   Each diff block is titled with a line heading.  Clicking on
	   the left line heading will open a new popup window with the
	   contents of the original file, located at that line number.
	   Clicking on the right line heading will open a new popup
	   window with the contents of the new file, located at line
	   number.  This capability can assist greatly when doing
	   complicated reviews, where a diff segment doesn't provide
	   enough contextual information.  An example of a popup
	   window can be seen in the screenshot below.  Note those
	   lines in the popup which refer to the topic text will be
	   hyperlinked to the add comment page, which will be loaded
	   in the main browser.  Click on the image below to enlarge
	   it.
	</p>
        <p>
	   <a href="screenshot.jpg">
	      <img src="screenshot_thumb.jpg" width="200" height="160"
	           alt="CVS integration"></a>
	</p>

	<h2>Installation</h2>
	<p>
	    The latest version of codestriker can be obtained from:
   <A HREF="http://prdownloads.sourceforge.net/codestriker/codestriker-1.4.2.tar.gz">
	http://prdownloads.sourceforge.net/codestriker/codestriker-1.4.2.tar.gz</A>
	</p>
	<p>
	    Codestriker sourceforge project information can be found from
        <A HREF="http://sourceforge.net/projects/codestriker">
           http://sourceforge.net/projects/codestriker</A>.
	</p>
	<p>
	    I use codestriker as a tool behind our company's firewall
	    for performing code reviews within our engineering team.
	    For RedHat 7.1, the installation is simply the following
	    as root on the internal web server:
	    <pre>
	    cd /var/www/cgi-bin
	    cp /from/installed/location/codestriker.pl .
	    cp /from/installed/location/codestriker.css ../html
	    mkdir /var/www/codestriker
	    chown apache.apache /var/www/codestriker
	    </pre>
	</p>
	<p>
	    The CSS file can be located elsewhere of course, but if it
	    is stored in another location, be sure to update its
	    location in codestriker.pl.
        </p>
	<p>
	    Codestriker stores all of its topic data and comments by
	    default in <code>/var/www/codestriker</code>.  This
	    location can be changed by the configuration variable at
	    the start of the script.  This directory needs to be owned
	    by the user which runs <code>httpd</code>, since the
	    script creates files and directories under the
	    <code>/var/www/codestriker</code> directory.  The username
	    is typically either nobody or apache.  Use the <code>ps
	    auxww | grep httpd</code> command to find out.
	</p>
	<p><font color="red">
	    Read through the configuration options within
            codestriker.pl to ensure all the settings are correct for
            your site.</font>  Among other things, these include
	    settings such as the location of your CVS repository, the
	    base URL to your bug tracking system, and the base URL to
	    your CVS viewing system.  Note these settings can be left
	    blank, they aren't required in order to use Codestriker.
        </p> 
	<p>
	    For deployments outside an intranet, I would suggest using
	    apache's <code>.htaccess</code> mechanism to limit access
	    as to who can execute the script, as an extra security
	    precaution.
	</p>
	<h2>Future plans</h2>
	<p>
	    Obviously there are many enhancements that can be made to
	    this tool.  My initial goal was to build something
	    quickly and it get it out there for real use, which will
	    then hopefully provide further input to future
	    enhancements.  Something short term is to optimise the HTML
	    output to use CSS to reduce the size.
	</p>
	<p>
	    Please send me an email
	   <A HREF="mailto:sitsNOSPAM@users.sourceforgeNOSPAM.net">
		sitsNOSPAM@users.sourceforgeNOSPAM.net</A>
		for your comments or
		submit them directly on the sourceforge project page
	    <a href="http://sourceforge.net/projects/codestriker">
		http://sourceforge.net/projects/codestriker</a>.
	</p>
	<hr>
	<a href="http://sourceforge.net">
	    <img src="http://sourceforge.net/sflogo.php?group_id=26443"
		 width="88"
		 height="31" border="0" alt="SourceForge Logo"></a>
    </body>
</html>
